cd C:\work\bbitai\felho_lab

cd ..
docker compose -f pdocker-compose.yml build

cd felho_lab
kubectl apply -f manifests.yaml
kubectl get pod

helm repo add traefik https://traefik.github.io/charts
helm repo update

helm uninstall traefik
helm list --all-namespaces

helm install traefik traefik/traefik --set ports.web.nodePort=32080 --set service.type=NodePort --set "additionalArguments={--api.insecure=true}"
helm upgrade traefik traefik/traefik --set ports.web.nodePort=32080 --set service.type=NodePort --set "additionalArguments={--api.insecure=true}"

helm install traefik traefik/traefik -f traefik-values.yaml
helm upgrade traefik traefik/traefik -f traefik-values.yaml

kubectl delete deployment photo-service
kubectl delete deployment sqlserver
kubectl get deployment

kubectl logs photo-service-service-
kubectl describe pod photo-service-

kubectl port-forward pod/sqlserver-5f5585b58-bjj8j 1434:1433
127.0.0.1,1434

kubectl port-forward pod/keycloak-d786fd4f-77mbk 18080:8080

http://localhost:8090/api/photo/photos?sortBy=date&order=desc
http://localhost:8090/api/photo/photos/1

realm:skal
http://localhost:18080/realms/skal/protocol/openid-connect/auth
http://localhost:18080/realms/skal/protocol/openid-connect/token
client id: ps
user:ps PS_USER realm roleal
client secret: fn41Zt7X3zWGas71RNazJ79Eibli7hDd


This is the backend for a photo album app.

The features of the app essentially is user management, and CRUD functionality for photos. Here is the detailed functionality:
-Uploading, deleting photos.
-List the names and dates of photos, sorted either by name or by date.
-Clicking on a list item should display the corresponding image.
-User management (registration, login, logout).
-Uploading and deleting are only permitted for logged-in users

The api of the app is defined in ps_api.yaml. using openapi-genrator-maven-plugin the api is generated, and then implemented in PhotoServiceController.
PhotoServiceController then calls PhotoServiceImpl.



i have added the ui project to tthe ui folder so you can see them, it will be removed later.
This app runs in kubernetes, using manifests.yaml. I use pdocker-compose.yml to build the images. I need you to generate a Dockerfile for the ui project, add the ui project to the pdocker-compose.yml file, and the manifest.yml file. In the kuberentes i use traefik for routing. trafeik is not present in the manifest, its added with the helm install traefik traefik/traefik -f traefik-values.yaml command. traefik-values.yaml contains the config for it. in the manifest.yaml the photo-service-ingress and photo-stripprefix is used by traefik for the routing configuartion. We probably need a similiar ingress and stripprefix for the ui project.




for maven build, use this command: C:\Program Files\JetBrains\IntelliJ IDEA 2025.2.4\plugins\maven\lib\maven3\bin\mvn.cmd -Didea.version=2025.2.5 -Dmaven.ext.class.path=C:\Program Files\JetBrains\IntelliJ IDEA 2025.2.4\plugins\maven\lib\maven-event-listener.jar -Djansi.passthrough=true -Dstyle.color=always -Dmaven.repo.local=C:\Users\bbitai\.m2\repository clean install -U -e -f pom.xml